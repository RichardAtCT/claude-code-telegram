services:
  bot:
    build: .
    # Or pull a tagged release from GHCR:
    # image: ghcr.io/richardatkinson/claude-code-telegram:1.2.0
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      # Persist SQLite database across restarts
      - bot-data:/home/botuser/workspace
      # Mount APPROVED_DIRECTORY from the host into the container.
      # The entrypoint auto-remaps APPROVED_DIRECTORY to this container path.
      - ${APPROVED_DIRECTORY:-.}:/home/botuser/workspace/project
      # Pass host Claude CLI credentials into the container (read-only)
      # Override with CLAUDE_CONFIG_DIR env var if credentials live elsewhere
      - ${CLAUDE_CONFIG_DIR:-${HOME}/.claude}:/host-claude-config:ro

volumes:
  bot-data:
