services:
  bot:
    build: .
    # Or pull a tagged release from GHCR:
    # image: ghcr.io/richardatkinson/claude-code-telegram:1.2.0
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      # Persist SQLite database across restarts
      - bot-data:/home/botuser/workspace
      # Mount host project directory so Claude Code can read/write files
      - ${HOST_PROJECT_DIR:-.}:/home/botuser/workspace/project
      # Pass host Claude CLI credentials into the container (read-only)
      # Only needed when using CLI auth (USE_SDK=true without ANTHROPIC_API_KEY)
      - ${HOME}/.claude:/home/botuser/.claude:ro

volumes:
  bot-data:
